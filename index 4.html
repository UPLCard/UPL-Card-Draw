<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flashy UPL Card Simulator - Tracker Edition</title>
<style>
body {
  background: radial-gradient(circle at center, #111 0%, #000 100%);
  color: white;
  font-family: Arial, sans-serif;
  text-align: center;
  padding: 20px;
}
h1 { color: gold; }
button, input {
  background: #333;
  color: white;
  border: 1px solid #555;
  padding: 8px 12px;
  margin: 5px;
  border-radius: 5px;
  cursor: pointer;
  transition: 0.2s;
}
button:hover { background: #555; }
.pack {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  margin: 20px auto;
  gap: 10px;
}
.card {
  width: 120px;
  height: 170px;
  border-radius: 10px;
  background: #222;
  display: flex;
  align-items: center;
  justify-content: center;
  perspective: 800px;
  transform-style: preserve-3d;
  transform: rotateY(180deg);
  transition: transform 0.6s ease, box-shadow 0.4s ease;
  box-shadow: 0 0 10px rgba(0,0,0,0.4);
}
.card.revealed {
  transform: rotateY(0deg);
}
.card span {
  backface-visibility: hidden;
  font-weight: bold;
}
.common { color: #999; box-shadow: 0 0 10px #555; }
.uncommon { color: #2ecc71; box-shadow: 0 0 15px #2ecc71; }
.rare { color: #3498db; box-shadow: 0 0 15px #3498db; }
.ultra-rare { color: #9b59b6; box-shadow: 0 0 20px #9b59b6; }
.mythic-rare { color: #e67e22; box-shadow: 0 0 25px #e67e22; }
.signature-rare { color: #f1c40f; box-shadow: 0 0 30px #f1c40f; }

#tracker {
  margin-top: 30px;
}
#tracker table {
  width: 90%;
  margin: 10px auto;
  border-collapse: collapse;
}
#tracker th, #tracker td {
  border: 1px solid #444;
  padding: 6px 10px;
  text-align: center;
}
#tracker th {
  background: #222;
}
</style>
</head>
<body>
<h1>Flashy UPL Card Simulator</h1>
<div>
  <label>Packs: <input id="packCount" type="number" value="1" min="1" max="50"></label>
  <button onclick="openPacks()">Open Packs</button>
  <button onclick="resetTracker()">Reset Tracker</button>
</div>
<div id="packsContainer"></div>
<div id="tracker"></div>

<script>
const rarities = {
  common: ['Diana','Zoe','Julia','Astrid','Maya','Clara','Elise','Serena','Nadine','Lila'],
  uncommon: ['Diana BS','Zoe BS','Julia BS','Astrid BS','Maya BS','Clara BS','Elise BS','Serena BS','Nadine BS','Lila BS'],
  rare: ['Diana BDS','Zoe BDS','Julia BDS','Astrid BDS','Maya BDS','Clara BDS','Elise BDS','Serena BDS','Nadine BDS','Lila BDS'],
  'ultra-rare': ['Diana AA','Zoe AA','Julia AA','Astrid AA','Maya AA','Clara AA','Elise AA','Serena AA','Nadine AA','Lila AA'],
  'mythic-rare': ['Diana AAR','Zoe AAR','Julia AAR','Astrid AAR','Maya AAR','Clara AAR','Elise AAR','Serena AAR','Nadine AAR','Lila AAR'],
  'signature-rare': ['Diana AAU','Zoe AAU','Julia AAU','Astrid AAU','Maya AAU','Clara AAU','Elise AAU','Serena AAU','Nadine AAU','Lila AAU','Diana SR','Zoe SR','Julia SR','Astrid SR','Maya SR','Clara SR','Elise SR','Serena SR','Nadine SR','Lila SR']
};

let totalPulls = [];

function pickRandom(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

function drawCard(slot) {
  let rarity = 'common';
  if (slot === 1) {
    rarity = Math.random() < 0.05 ? 'uncommon' : 'common';
  } else if (slot === 2) {
    rarity = Math.random() < 0.20 ? 'rare' : 'uncommon';
  } else if (slot === 3) {
    let r = Math.random();
    if (r < 0.01) rarity = 'signature-rare';
    else if (r < 0.10) rarity = 'mythic-rare';
    else rarity = 'ultra-rare';
  }
  return { rarity, name: pickRandom(rarities[rarity]) };
}

function logPull(card) {
  totalPulls.push(card);
  updateTracker();
}

function updateTracker() {
  const tracker = document.getElementById('tracker');
  tracker.innerHTML = `
    <h3>Pull History (${totalPulls.length} cards)</h3>
    <table>
      <tr><th>#</th><th>Card Name</th><th>Rarity</th></tr>
      ${totalPulls.map((c, i) => `
        <tr class="${c.rarity}">
          <td>${i + 1}</td>
          <td>${c.name}</td>
          <td>${c.rarity.replace('-', ' ')}</td>
        </tr>`).join('')}
    </table>`;
}

function resetTracker() {
  totalPulls = [];
  document.getElementById('tracker').innerHTML = '';
  document.getElementById('packsContainer').innerHTML = '';
}

async function openPacks() {
  const container = document.getElementById('packsContainer');
  container.innerHTML = '';
  const packCount = parseInt(document.getElementById('packCount').value) || 1;

  for (let p = 0; p < packCount; p++) {
    const packTitle = document.createElement('h3');
    packTitle.textContent = `Pack ${p + 1}`;
    container.appendChild(packTitle);

    const packDiv = document.createElement('div');
    packDiv.className = 'pack';
    container.appendChild(packDiv);

    const cards = [drawCard(0), drawCard(1), drawCard(2), drawCard(3)];
    for (let i = 0; i < cards.length; i++) {
      const c = document.createElement('div');
      c.className = `card ${cards[i].rarity}`;
      const label = document.createElement('span');
      label.textContent = cards[i].name;
      c.appendChild(label);
      packDiv.appendChild(c);
      setTimeout(() => {
        c.classList.add('revealed');
        logPull(cards[i]);
      }, 600 * (i + 1));
    }
  }
}
</script>
</body>
</html>
