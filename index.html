<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Pack Simulator — Flash Edition</title>
<style>
:root{
  --bg1: #0f1724;
  --bg2: #0b1320;
  --card-w: 160px;
  --card-h: 220px;
  --radius: 12px;
  --font: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
*{box-sizing:border-box}
body{margin:0; background: radial-gradient(1200px 600px at 10% 10%, rgba(20,30,60,0.35), transparent), linear-gradient(180deg,var(--bg1),var(--bg2)); color:#e6eef8; font-family:var(--font); -webkit-font-smoothing:antialiased; padding:22px;}
.app{max-width:1100px;margin:0 auto}
.header{display:flex;align-items:center;gap:16px; margin-bottom:14px}
.logo{font-weight:800;font-size:18px}
.controls{display:flex;gap:8px;align-items:center;margin-left:auto}
.button{background:linear-gradient(180deg,#2b6cff,#0b48ff);border:none;color:white;padding:10px 14px;border-radius:10px;cursor:pointer;box-shadow:0 8px 24px rgba(11,72,255,0.16);font-weight:600}
.button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.08);color:#cfe0ff;box-shadow:none}
.input-small{width:80px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:#eaf3ff}
.panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.04)}

/* settings */
.row{display:flex;gap:8px;align-items:center;margin-bottom:8px}
.slot-settings{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
.rarity-row{display:flex;gap:8px;align-items:center}
.rarity-row label{width:110px;font-size:13px;color:#cfe0ff}
.range-input{width:80px;padding:6px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:rgba(0,0,0,0.25);color:#eaf3ff}

/* packs area */
.packs-area{display:flex;flex-direction:column;gap:12px;margin-top:18px}
.pack{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
.pack-title{font-weight:700;color:#dff0ff;margin-bottom:8px}

/* cards */
.cards{display:flex;gap:12px;flex-wrap:wrap}
.card-wrap{width:var(--card-w);height:var(--card-h);perspective:1000px}
.card{width:100%;height:100%;border-radius:var(--radius);position:relative;transform-style:preserve-3d;transition:transform 700ms cubic-bezier(.2,.9,.3,1);}
.card.flip{transform:rotateY(180deg)}
.card-face{position:absolute;inset:0;border-radius:var(--radius);backface-visibility:hidden;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:12px;box-shadow:0 12px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.04);font-weight:700}
.card-front{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));color:#cfe0ff}
.card-back{transform:rotateY(180deg);background:linear-gradient(180deg,#081025,#081423);color:#99bfe9;font-size:13px}

/* rarity glows */
.rarity-common{box-shadow:0 8px 38px rgba(120,120,120,0.06), inset 0 0 18px rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.02); color:#c0c0c0}
.rarity-uncommon{box-shadow:0 10px 46px rgba(39,174,96,0.12), 0 0 18px rgba(39,174,96,0.06); border:1px solid rgba(39,174,96,0.12); color:#bff2d0}
.rarity-rare{box-shadow:0 10px 56px rgba(41,128,185,0.12), 0 0 22px rgba(52,152,219,0.08); border:1px solid rgba(52,152,219,0.12); color:#d6f0ff}
.rarity-ultra{box-shadow:0 12px 72px rgba(155,89,182,0.16), 0 0 28px rgba(155,89,182,0.12); border:1px solid rgba(155,89,182,0.18); color:#f1e6ff}
.rarity-mythic{box-shadow:0 12px 88px rgba(230,126,34,0.16), 0 0 34px rgba(230,126,34,0.12); border:1px solid rgba(230,126,34,0.16); color:#fff0d8}
.rarity-sign{box-shadow:0 14px 120px rgba(241,196,15,0.22), 0 0 48px rgba(241,196,15,0.18); border:1px solid rgba(241,196,15,0.18); color:#fff9df}

/* shine overlay */
.shine{position:absolute;inset:0;border-radius:var(--radius);pointer-events:none;background:linear-gradient(120deg, rgba(255,255,255,0.06), rgba(255,255,255,0));mix-blend-mode:screen;opacity:0.6}

/* animations */
@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.04); opacity: 0.95; }
  100% { transform: scale(1); opacity: 1; }
}
.pulse { animation: pulse 1.6s ease-in-out infinite; }

.footer{margin-top:16px;color:#98b6d6;font-size:13px}

/* responsive */
@media (max-width:860px){ .grid{grid-template-columns:1fr} .controls{flex-wrap:wrap} .cards{justify-content:center} }
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <div class="logo">Pack Simulator — Flash Edition</div>
    <div class="small">Customizable odds, animated reveals, and rarity glow</div>

    <div class="controls panel">
      <div style="display:flex;gap:8px;align-items:center">
        <label style="font-size:13px;color:#dff0ff">Packs:</label>
        <input id="packCount" class="input-small" type="number" value="1" min="1" max="50">
        <button id="openBtn" class="button">Open Packs</button>
        <button id="resetBtn" class="button secondary">Reset Defaults</button>
        <button id="toggleSettings" class="button secondary">Toggle Settings</button>
      </div>
      <div style="margin-top:8px;font-size:12px;color:#bfe3ff">Default: Slot1=Common100, Slot2=Common95/Uncommon5, Slot3=Uncommon80/Rare20, Slot4=Ultra90/Mythic9/Signature1</div>
    </div>
  </div>

  <div id="settingsPanel" class="panel" style="margin-top:10px;display:none">
    <div style="display:flex;gap:12px;align-items:center;justify-content:space-between">
      <div style="font-weight:700">Slot configuration (edit percentages)</div>
      <div style="font-size:13px;color:#bfe3ff">Totals per slot should be ≈100%</div>
    </div>

    <div class="slot-settings" id="slotSettings">
      <!-- slot controls will be injected -->
    </div>
  </div>

  <div id="packs" class="packs-area"></div>

  <div class="footer">Runs fully in your browser. To host: upload index.html to GitHub Pages or Netlify.</div>
</div>

<script>
// Default data
const DEFAULT_CONFIG = [
  { 'Common':100 },
  { 'Common':95, 'Uncommon':5 },
  { 'Uncommon':80, 'Rare':20 },
  { 'Ultra Rare':90, 'Mythic Rare':9, 'Signature Rare':1 }
];

const POOLS = {
  'Common': ['Diana','Zoe','Julia','Astrid','Maya','Clara','Elise','Serena','Nadine','Lila'],
  'Uncommon': ['Diana BS','Zoe BS','Julia BS','Astrid BS','Maya BS','Clara BS','Elise BS','Serena BS','Nadine BS','Lila BS'],
  'Rare': ['Diana BDS','Zoe BDS','Julia BDS','Astrid BDS','Maya BDS','Clara BDS','Elise BDS','Serena BDS','Nadine BDS','Lila BDS'],
  'Ultra Rare': ['Diana AA','Zoe AA','Julia AA','Astrid AA','Maya AA','Clara AA','Elise AA','Serena AA','Nadine AA','Lila AA'],
  'Mythic Rare': ['Diana AAR','Zoe AAR','Julia AAR','Astrid AAR','Maya AAR','Clara AAR','Elise AAR','Serena AAR','Nadine AAR','Lila AAR'],
  'Signature Rare': ['Diana AAU','Zoe AAU','Julia AAU','Astrid AAU','Maya AAU','Clara AAU','Elise AAU','Serena AAU','Nadine AAU','Lila AAU','Diana SR','Zoe SR','Julia SR','Astrid SR','Maya SR','Clara SR','Elise SR','Serena SR','Nadine SR','Lila SR']
};

let config = JSON.parse(JSON.stringify(DEFAULT_CONFIG)); // deep copy
const rarities = ['Common','Uncommon','Rare','Ultra Rare','Mythic Rare','Signature Rare'];
const rarityClasses = {
  'Common':'rarity-common',
  'Uncommon':'rarity-uncommon',
  'Rare':'rarity-rare',
  'Ultra Rare':'rarity-ultra',
  'Mythic Rare':'rarity-mythic',
  'Signature Rare':'rarity-sign'
};

// Helper functions
function weightedPick(weightsObj) {
  const entries = Object.entries(weightsObj).filter(([k,v])=>v>0);
  const total = entries.reduce((s,[k,v])=>s+v,0);
  const r = Math.random()*total;
  let acc = 0;
  for (const [k,v] of entries) {
    acc += v;
    if (r < acc) return k;
  }
  return entries.length? entries[0][0] : 'Common';
}

function randomFrom(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

// UI building
const slotSettingsDiv = document.getElementById('slotSettings');
function renderSettings() {
  slotSettingsDiv.innerHTML = '';
  for (let s=0;s<4;s++) {
    const slotBox = document.createElement('div');
    slotBox.className = 'panel';
    slotBox.style.padding = '10px';
    slotBox.style.border = '1px solid rgba(255,255,255,0.03)';
    slotBox.innerHTML = `<div style="font-weight:700;margin-bottom:6px">Slot ${s+1}</div>`;
    rarities.forEach(r=>{
      const row = document.createElement('div');
      row.className = 'rarity-row';
      const label = document.createElement('label');
      label.textContent = r;
      label.style.width = '120px';
      const input = document.createElement('input');
      input.type = 'number';
      input.min = 0; input.max = 100; input.value = (config[s][r]!==undefined)? config[s][r] : 0;
      input.className = 'range-input';
      input.dataset.slot = s; input.dataset.rarity = r;
      input.addEventListener('change', onConfigChange);
      row.appendChild(label); row.appendChild(input);
      slotBox.appendChild(row);
    });
    slotSettingsDiv.appendChild(slotBox);
  }
}

function onConfigChange(e) {
  const s = parseInt(e.target.dataset.slot);
  const r = e.target.dataset.rarity;
  const v = parseFloat(e.target.value) || 0;
  if (!config[s]) config[s] = {};
  config[s][r] = v;
}

// Pack opening
function openPacks(n) {
  const packsDiv = document.getElementById('packs');
  packsDiv.innerHTML = '';
  for (let i=0;i<n;i++) {
    const packEl = document.createElement('div');
    packEl.className = 'pack panel';
    const title = document.createElement('div');
    title.className = 'pack-title';
    title.textContent = `Pack ${i+1}`;
    packEl.appendChild(title);
    const cardsWrap = document.createElement('div');
    cardsWrap.className = 'cards';
    packEl.appendChild(cardsWrap);
    packsDiv.appendChild(packEl);

    // reveal sequence: create cards first (back face), then flip them sequentially
    const picks = [];
    for (let s=0;s<4;s++) {
      const slotWeights = config[s];
      const rarity = weightedPick(slotWeights || {});
      const pool = POOLS[rarity] || [].concat(...Object.values(POOLS));
      const name = randomFrom(pool);
      picks.push({name,rarity});
    }

    // create DOM for each card
    picks.forEach((p,idx)=>{
      const wrap = document.createElement('div'); wrap.className='card-wrap';
      const card = document.createElement('div'); card.className='card';
      const front = document.createElement('div'); front.className='card-face card-front '+(rarityClasses[p.rarity]||'');
      const back = document.createElement('div'); back.className='card-face card-back';
      front.innerHTML = `<div style="font-size:14px">${p.name}</div><div style="margin-top:8px;font-size:12px;opacity:0.9">${p.rarity}</div>`;
      back.innerHTML = `<div style="font-size:13px">Sealed</div><div style="font-size:11px;opacity:0.8;margin-top:6px">Slot ${idx+1}</div>`;
      const shine = document.createElement('div'); shine.className='shine';
      front.appendChild(shine);
      card.appendChild(front); card.appendChild(back);
      wrap.appendChild(card);
      cardsWrap.appendChild(wrap);

      // set rarity class on front for glow
      front.classList.add(rarityClasses[p.rarity]||'rarity-common');
      if (p.rarity === 'Signature Rare' || p.rarity === 'Mythic Rare') {
        front.classList.add('pulse');
      }

      // flip with delay
      setTimeout(()=>{
        card.classList.add('flip');
      }, 600 + idx * 700);
    });

  }
}

// Setup and events
document.getElementById('openBtn').addEventListener('click', ()=>{
  const n = Math.max(1, Math.min(50, parseInt(document.getElementById('packCount').value)||1));
  openPacks(n);
});
document.getElementById('resetBtn').addEventListener('click', ()=>{
  config = JSON.parse(JSON.stringify(DEFAULT_CONFIG));
  renderSettings();
});
document.getElementById('toggleSettings').addEventListener('click', ()=>{
  const el = document.getElementById('settingsPanel');
  el.style.display = (el.style.display === 'none') ? 'block' : 'none';
});

// Init
renderSettings();
</script>
</body>
</html>
